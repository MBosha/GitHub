/* Adriver viewability 1.2.1. "Time_vpaidswf". Developed by Alexander Nikolaev */
function AdriverViewability(t,e,i,n,r){function s(){try{return window.top!=window&&window.top.document.domain!==window.document.domain}catch(t){}return!0}function o(t){return!isNaN(parseFloat(t))&&isFinite(t)}function a(t,e){return function(){return t.apply(e,arguments)}}function l(){var t=navigator.userAgent;return/trident/gi.test(t)||/msie/gi.test(t)?"IE":t.search(/Firefox/)>0?"Firefox":t.search(/Opera/)>0?"Opera":t.search(/Chrome/)>0?"Chrome":t.search(/Safari/)>0?"Safari":t.search(/Konqueror/)>0?"Konqueror":t.search(/Iceweasel/)>0?"Iceweasel":t.search(/SeaMonkey/)>0?"SeaMonkey":t.search(/Gecko/)>0?"Gecko":"Search Bot"}this.browser=l();var c="position:absolute;width:1px;height:1px;";c+="Firefox"===this.browser?"opacity:0.01;":"visibility:hidden;",this.win=window,this.zeroEvent=!0,this.isPermanent=!1,"undefined"!=typeof e&&(1!==e&&2!==e||(this.isPermanent=!0),2===e&&(this.zeroEvent=!1)),"undefined"!=typeof i?"string"==typeof i?document.getElementById(i)?this.element=document.getElementById(i):this.element=void 0:0!==i?this.element=i:this.element=void 0:this.element=void 0,this.delay=n||1e3,this.eventLink=t,"undefined"!=typeof r?!o(r)||r<=0?this.startTime=(new Date).getTime():this.startTime=r:this.startTime=(new Date).getTime(),this.isStarted=!1,this.isFrame=s(),this.isViewable=!1,this.viewableCount=0,this.isCenterVisible=!1,this.localTimer=null,this.eventsCallbacks={},this.handler=a(this.controlLocalViewability,this),this.frameInfo={topLeft:{isDrawn:!1,isVisible:!1,style:c+"top:0;left:0",timer:0},topRight:{isDrawn:!1,isVisible:!1,style:c+"top:0;right:0",timer:0},bottomLeft:{isDrawn:!1,isVisible:!1,style:c+"bottom:0;left:0",timer:0},bottomRight:{isDrawn:!1,isVisible:!1,style:c+"bottom:0;right:0",timer:0},centerTop:{isDrawn:!1,isVisible:!1,style:c+"top:25%;left:50%",timer:0},centerLeft:{isDrawn:!1,isVisible:!1,style:c+"top:50%;left:25%",timer:0},centerRight:{isDrawn:!1,isVisible:!1,style:c+"top:50%;left:75%",timer:0},centerBottom:{isDrawn:!1,isVisible:!1,style:c+"top:75%;left:50%",timer:0},center:{isDrawn:!1,isVisible:!1,style:c+"top:50%;left:50%",timer:0}},this.startAFV()}AdriverViewability.prototype.startAFV=function(){function t(t){for(var i in t){var n=document.createElement("iframe");n.id="AdriverFrameViewability_"+i,n.style.cssText=t[i].style,document.body.appendChild(n),t[i].isDrawn=!0,e(i)}}function e(t){var e=i(document.getElementById("AdriverFrameViewability_"+t));void 0!==e&&(e.write('<script>function tick(e){var t=(new Date).getTime();0!=tick0&&(delay=t-tick0,delay<=100?(viewcount++,count>0&&count--,viewcount>=61&&0===count&&(parent.postMessage&&parent.postMessage(\'{"state": "viewable","AFV": "true","frame": "'+t+'"}\',"*"),count=6)):viewcount=0),tick0=t}function ticker(){requestAnimFrame(function(){ticker(),tick()})}window.requestAnimFrame=function(e){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();var tick0=0,viewcount=0,count=0;ticker()</script>'),e.close())}function i(t){return t.contentWindow?t.contentWindow.document:t.contentDocument}function n(t){window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent("onmessage",t)}if(!this.isStarted){if(/in/.test(document.readyState)&&this.isFrame)return void(window.onload=function(){this.startAFV()}.bind(this));var r=(new Date).getTime()-this.startTime;this.zeroEvent&&(this.sendEvent(this.eventLink,0,"176="+r),this.callEvent("ZeroEvent")),this.isStarted=!0,this.isFrame&&"IE"!==this.browser?(t(this.frameInfo),n(this.collectInfo.bind(this))):this.isFrame||"undefined"==typeof this.element||(this.startLocalListen(),this.controlLocalViewability())}},AdriverViewability.prototype.stopAFV=function(){function t(t){for(var e in t){var i=document.getElementById("AdriverFrameViewability_"+e);void 0!==i&&i.parentNode.removeChild(i),t[e].isDrawn=!1,t[e].isVisible=!1}}function e(t){window.removeEventListener?window.removeEventListener("message",t,!1):window.detachEvent("onmessage",t)}this.isStarted&&(t(this.frameInfo),e(this.collectInfo.bind(this)),this.isStarted=!1)},AdriverViewability.prototype.collectInfo=function(t){try{var e=JSON.parse(t.data);void 0!==e.AFV&&(this.isCenterVisible===!1&&"center"===e.frame&&"viewable"===e.state&&(this.isCenterVisible=!0,this.checkViwability()),this.isCenterVisible===!0&&"viewable"===e.state&&(this.frameInfo[e.frame].isVisible=!0,this.frameInfo[e.frame].timer=(new Date).getTime()))}catch(t){}},AdriverViewability.prototype.checkViwability=function(){var t=0;for(var e in this.frameInfo){var i=(new Date).getTime();this.frameInfo[e].isVisible===!0&&(i-this.frameInfo[e].timer>300?(this.frameInfo[e].isVisible=!1,"center"===e&&(this.isCenterVisible=!1)):t++)}if(this.viewableCount=t,this.isStarted===!0&&this.isCenterVisible===!0&&!this.isViewable)if(t>=6){this.isViewable=!0;var n=(new Date).getTime()-this.startTime;this.sendEvent(this.eventLink,53,"176="+n),this.callEvent("ViewabilityEvent"),this.isPermanent||this.stopAFV()}else setTimeout(this.checkViwability.bind(this),100)},AdriverViewability.prototype.sendEvent=function(t,e,i){function n(t){function e(t){return"http:"==location.protocol||"https:"==location.protocol?(/^\/\//.test(t)?location.protocol:"")+t:(/^\/\//.test(t)?"https:":"")+t}if(t=e(t).split("![rnd]").join(~~(1e6*Math.random())),document.createElement&&document.body){var i=document.createElement("img");i.style.position="absolute",i.style.display="none",i.style.width=i.style.height="0px",i.style.display="none",i.src=t,document.body.appendChild(i)}else(new Image).src=t}if("undefined"!=typeof t&&"undefined"!=typeof e)return t.indexOf("&type=")==-1&&(t+="&type="),i&&t.indexOf("&custom=")==-1&&(t+="&custom="),t=t.split("&type=").join("&type="+e),i&&(t=t.split("&custom=").join("&custom="+i)),n(t),this},AdriverViewability.prototype.controlLocalViewability=function(){if(this.isStarted){var t=this.checkLocalViewability(this.element,this.win);this.isViewable||(t>=.5?this.localTimer||(this.localTimer=setTimeout(this.localViwabilityComplete.bind(this),this.delay)):(clearTimeout(this.localTimer),this.localTimer=null))}},AdriverViewability.prototype.localViwabilityComplete=function(){var t=this.checkLocalViewability(this.element,this.win);if(!this.isViewable&&t>=.5){this.isViewable=!0;var e=(new Date).getTime()-this.startTime;this.sendEvent(this.eventLink,53,"176="+e),this.callEvent("ViewabilityEvent"),this.isPermanent||this.stopLocalListen()}},AdriverViewability.prototype.checkLocalViewability=function(t,e){function i(t){var i=n(t),o=c(t,1,e),a=s(e),l=r("h",i,o,a),h=r("v",i,o,a);return{S:i.w*i.h,curS:l*h}}function n(t){return{w:t.clientWidth,h:t.clientHeight}}function r(t,e,i,n){var r="v"===t,s=r?"h":"w",o=r?"top":"left",a=r?"ch":"cw",l=r?"st":"sl",c=0;return i[o]<n[l]?i[o]+e[s]>n[l]&&(c=i[o]+e[s]-n[l],c>n[a]&&(c=n[a])):i[o]<n[l]+n[a]&&(c=i[o]+e[s]<=n[l]+n[a]?e[s]:n[l]+n[a]-i[o]),c}function s(t){var e={},i=t.document,n=i.body,r=i.documentElement,s="CSS1Compat"==i.compatMode;return e.cw=s&&r.clientWidth||t.innerWidth||n.clientWidth,e.ch=s&&r.clientHeight||t.innerHeight||n.clientHeight,e.sl=t.pageXOffset||s&&r.scrollLeft||n.scrollLeft,e.st=t.pageYOffset||s&&r.scrollTop||n.scrollTop,e}function o(t,e,i){return t.currentStyle?t.currentStyle[e]||"":i.getComputedStyle?i.getComputedStyle(t,null)[e]||"":void 0}function a(t,e,i){var n=t.getBoundingClientRect();if(e){var r=s(i);return{left:n.left+r.sl,top:n.top+r.st}}return n}function l(t,e,i){for(var n,r=0,a=0,l=!1;t;)"fixed"===o(t,"position",i)&&(l=!0),r+=t.offsetTop,a+=t.offsetLeft,t=t.offsetParent;return e&&l?(n=s(i),{left:a+n.sl,top:r+n.st}):e||l?{left:a,top:r}:(n=s(i),{left:a-n.sl,top:r-n.st})}function c(t,e,i){var n=t.getBoundingClientRect?a(t,e,i):l(t,e,i);return{left:Math.round(n.left),top:Math.round(n.top)}}if("undefined"!=typeof t){var h=i(t);return h.curS/h.S}},AdriverViewability.prototype.addEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},AdriverViewability.prototype.removeEvent=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)},AdriverViewability.prototype.startLocalListen=function(){this.addEvent(this.win,"scroll",this.handler),this.addEvent(this.win,"resize",this.handler)},AdriverViewability.prototype.stopLocalListen=function(){this.removeEvent(this.win,"scroll",this.handler),this.removeEvent(this.win,"resize",this.handler)},AdriverViewability.prototype.getViewableProc=function(){return this.isFrame?this.viewableCount<2?0:this.viewableCount<3?12.5:this.viewableCount<5?25:this.viewableCount<6?37.5:this.viewableCount<7?50:this.viewableCount<8?75:100:Math.round(100*this.checkLocalViewability(this.element,this.win))},AdriverViewability.prototype.getViewability=function(){var t=this.getViewableProc();return this.isFrame&&"IE"===this.browser?"unmesurable":t>=50?"viewable":"unviewable"},AdriverViewability.prototype.subscribe=function(t,e,i){t=t.bind(i),this.eventsCallbacks[e]=t},AdriverViewability.prototype.unsubscribe=function(t){this.eventsCallbacks[t]=null},AdriverViewability.prototype.callEvent=function(t){t in this.eventsCallbacks&&this.eventsCallbacks[t]()};var adriverviewability=adriverviewability||{};adriverviewability.v=adriverviewability.v||[],adriverviewability.v.push=function(t){try{t.call()}catch(t){}},adriverviewability.checkCalls=function(){for(var t=0;t<adriverviewability.v.length;t++)if("undefined"==typeof adriverviewability.v[t].called)try{adriverviewability.v[t].call(),adriverviewability.v[t].called=!0}catch(t){}},adriverviewability.checkCalls();